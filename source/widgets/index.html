---
layout: default
---
<div class='row-fluid'>
  <div class='span8'>
    <h2>Introduction</h2>
    <p>
      The purpose of this document is to define consumption of the RateCity
      (http://www.ratecity.com.au) JS Widget API.
    </p>
    <p>
      You are assumed to be familiar with HTML and JavaScript programming, along
      with CSS (Cascading Style Sheets) to control the style.
    </p>

  </div>
  <div class='span4'>
    <script type="text/javascript">
      function ratecityConfig() {
        // product request configuration
        var config = {
          vertical: 'credit-cards',
          stylesheet: "http://feeds.ratecity.com.au/assets/widget.css",
          container: 'credit-cards-table',
          limit: 5
        };
        return config;
      };
    </script>
    <script src="http://feeds.ratecity.com.au/assets/widget.js" type="text/javascript"></script>
    <div id="credit-cards-table"></div>
  </div>
</div>

<h2>Getting it working</h2>
<h3>Embedding the code</h3>

<p>Firstly, embed the following code on the page, and use the parameter list below to fill out the parameters.<p>
{% gist 28bc535c8267220543f7a439b50416736bb31936 %}
<p>If you are already using JQuery you should probably use the following version instead, as this does not bundle JQuery with the widget.</p>
{% gist db512f12f3aea9802d08ae6c2c91db18a9885174 }

<h3>Parameters</h3>
<p>A number of parameters are required to retrieve results.</p>
<dl>
  <dt>vertical</dt>
  <dd>A string container the vertical that you wish to display products from</dd>
  <dd>Choose from: home-loans, credit-cards, term-deposits, personal-loans, car-loans, savings-accounts and transaction-accounts.</dd>
  <dt>stylesheet</dt>
  <dd>A string url to the css to use when rendering the table, see below</dd>
  <dt>container</dt>
  <dd>The html container id to use to load the widget into</dd>
  <dt>limit</dt>
  <dd>The maximum number of products to display</dd>
  <dt>disclaimer</dt>
  <dd>A string containing additional disclaimer text, appended to the RateCity default disclaimer</dd>
  <dt>tracking</dd>
  <dd>A closure which called when the apply link is clicked. The product object contains the product attributes retrieved from the feed, documented elsewhere</dt>
  <dt>campaign</dt>
  <dd>A string which will enable a resulting click to be attribute to this specific campaign variable
</dl>

<h2>Customisation</h2>
<h3>Widget Markup</h3>
<p>The javascript, when executed, will use document.write() to embed markup into the DOM. The markup will have a format similar to the example below:</p>

{% gist 3c7d31c0dea9a350ca577da67bcbd41d113d0a83 }

<h3>Customised Styles</h3>
<p>Most of the classes are self-explanatory, but are detailed below:</p>

<dl>
  <dt>rc-toptable</dt>
  <dd>The outer div for the widget</dd>
  <dt>ratecity_top</dt>
  <dd>Identifies the outer div for the table title.</dd>
  <dt>ratecity_tablehead</dt>
  <dd>Identifies the heading (h2) used for the table title.</dd>
  <dt>ratecity_header</dt>
  <dd>Identifies the table row containing the data column headers</dd>
  <dt>ratecity_rowodd and ratecity_roweven</dt>
  <dd>Identifies the table row containing product data</dd>
  <dt>ratecity_company</dt>
  <dd>Identifies the table data element containing the company logo.</dd>
  <dd>See above for the markup within this element</dd>
  <dt>ratecity_product</dt>
  <dd>
    Identifies the table data element containing product description.
    <br />
    See above for the markup within this element
  </dd>
  <dt>ratecity_best_rate_percentage</dt>
  <dd>Identifies an optional column added using the 'fields' parameter, in this case best_rate_percentage</dd>
  <dt>ratecity_apply</dt>
  <dd>Identifies the table data element containing the markup for a product application.</dd>
  <dd>See above for the markup within this element</dd>
  <dt>ratecity_footer</dt>
  <dd>Outer div for the footer.</dd>
  <dd>See above for the markup within this element</dd>
</dl>

<h3>Customised Style Example</h3>
<p>Below is an example of the style we use on RateCity.</p>

{% gist 353079870e9034c21a8044931feebab89e012ebd }

<h2>Leaderboard Widget</h2>

<hr />
<script type="text/javascript">
  function ratecityConfig() {
    // product request configuration
    var config = {
      format: 'leaderboard',
      vertical: 'home-loans',
      stylesheet: "http://feeds.ratecity.com.au/assets/widget.css",
      container: 'home-loans-table',
      limit: 4,
      disclaimer: 'Your disclaimer here',
      source: 'omg',
      campaign: 'credit_cards',
      // generate google analytics event tracking code for links
      tracking: function(product) {
        _gaq.push(['_trackEvent', 'Leads', 'RateCity', 'BestBuyHomeLoan|GotoSite|' + product.company.name + '|' + product.description]);
      }
    };
    return config;
  };
</script>
<script src="http://feeds.ratecity.com.au/assets/widget.js" type="text/javascript"></script>
<div id="home-loans-table"></div>
